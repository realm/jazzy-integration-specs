<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Request Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Protocol/Request" class="dashAnchor"></a>

    <a title="Request Protocol Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          Siesta Y.Y.Y Docs
        </a>
         (96% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/bustoutsolutions/siesta">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">Siesta Reference</a>
      <img class="carat" src="../img/carat.png" />
      Request Protocol Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Resources.html">Resources</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/Service.html">Service</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/Resource.html">Resource</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Entity.html">Entity</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Configuration.html">Configuration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/ConfigurationPatternConvertible.html">ConfigurationPatternConvertible</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/TypedContentAccessors.html">TypedContentAccessors</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Observing%20Resources.html">Observing Resources</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/ResourceObserver.html">ResourceObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Observing%20Resources.html#/s:6Siesta23ResourceObserverClosurea">ResourceObserverClosure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/ResourceEvent.html">ResourceEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/ResourceEvent/NewDataSource.html">– NewDataSource</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Requests.html">Requests</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/RequestMethod.html">RequestMethod</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/RequestState.html">RequestState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RequestError.html">RequestError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RequestError/Cause.html">– Cause</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/Response.html">Response</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ResponseInfo.html">ResponseInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Request%20Customization.html">Request Customization</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/RequestChainAction.html">RequestChainAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RequestDelegate.html">RequestDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RequestCompletionHandler.html">RequestCompletionHandler</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Response%20Pipeline.html">Response Pipeline</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Pipeline.html">Pipeline</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/PipelineStage.html">PipelineStage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/PipelineStage/MutationAction.html">– MutationAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/PipelineStageKey.html">PipelineStageKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/ResponseTransformer.html">ResponseTransformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ResponseContentTransformer.html">ResponseContentTransformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ResponseContentTransformer/InputTypeMismatchAction.html">– InputTypeMismatchAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/StandardTransformer.html">StandardTransformer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Response%20Pipeline.html#/s:6Siesta23JSONResponseTransformeryAA08ResponseC0_pSbF">JSONResponseTransformer(_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Response%20Pipeline.html#/s:6Siesta23TextResponseTransformeryAA0cD0_pSbF">TextResponseTransformer(_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Response%20Pipeline.html#/s:6Siesta24ImageResponseTransformeryAA0cD0_pSbF">ImageResponseTransformer(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Logging.html">Logging</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SiestaLog.html">SiestaLog</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SiestaLog/Category.html">– Category</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Caching.html">Caching</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/EntityCache.html">EntityCache</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Network%20Layer.html">Network Layer</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/NetworkingProvider.html">NetworkingProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/NetworkingProviderConvertible.html">NetworkingProviderConvertible</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RequestNetworking.html">RequestNetworking</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Network%20Layer.html#/s:6Siesta35RequestNetworkingCompletionCallbacka">RequestNetworkingCompletionCallback</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RequestTransferMetrics.html">RequestTransferMetrics</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/URLSessionProvider.html">URLSessionProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SessionTaskContainer.html">SessionTaskContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Extensions.html#/s:Sa">Array</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Extensions.html#/s:SD">Dictionary</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Extensions.html#/c:objc(cs)NSArray">NSArray</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Extensions.html#/c:objc(cs)NSDictionary">NSDictionary</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/NSRegularExpression.html">NSRegularExpression</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Set.html">Set</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/URL.html">URL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/URLSession.html">URLSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/URLSessionConfiguration.html">URLSessionConfiguration</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Protocols.html#/s:6Siesta15JSONConvertibleP">JSONConvertible</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/URLConvertible.html">URLConvertible</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Typealiases.html#/Image">Image</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Other%20Typealiases.html#/s:6Siesta5Imagea">Image</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>Request</h1>
              <div class="declaration">
                <div class="language">
                  
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">Request</span> <span class="p">:</span> <span class="kt">AnyObject</span></code></pre>

                </div>
              </div>
            <p>An API request. Provides notification hooks about the status of the request, and allows cancellation.</p>

<p>Note that this represents only a <em>single request</em>, whereas <code><a href="../Protocols/ResourceObserver.html">ResourceObserver</a></code>s receive notifications about
<em>all</em> resource load requests, no matter who initiated them. Note also that these hooks are available for <em>all</em>
requests, whereas <code><a href="../Protocols/ResourceObserver.html">ResourceObserver</a></code>s only receive notifications about changes triggered by <code>load()</code>, <code>loadIfNeeded()</code>,
and <code>overrideLocalData(...)</code>.</p>

<p><code>Request</code> guarantees that it will call any given callback <em>at most</em> one time.</p>

<p>Callbacks are always called on the main thread.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    There is no race condition between a callback being added and a response arriving. If you add a callback after the
response has already arrived, the callback is still called as usual. In other words, when attaching a hook, you
<strong>do not need to worry</strong> about where the request is in its lifecycle. Except for how soon it’s called, your hook
will see the same behavior regardless of whether the request has not started yet, is in progress, or is completed.

</div>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP12onCompletionyAaB_pyAA12ResponseInfoVcF"></a>
                    <a name="//apple_ref/swift/Method/onCompletion(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP12onCompletionyAaB_pyAA12ResponseInfoVcF">onCompletion(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the closure once when the request finishes for any reason.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onCompletion</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/ResponseInfo.html">ResponseInfo</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP9onSuccessyAaB_pyAA6EntityVyypGcF"></a>
                    <a name="//apple_ref/swift/Method/onSuccess(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP9onSuccessyAaB_pyAA6EntityVyypGcF">onSuccess(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the closure once if the request succeeds.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/Entity.html">Entity</a></span><span class="o">&lt;</span><span class="kt">Any</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP9onNewDatayAaB_pyAA6EntityVyypGcF"></a>
                    <a name="//apple_ref/swift/Method/onNewData(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP9onNewDatayAaB_pyAA6EntityVyypGcF">onNewData(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the closure once if the request succeeds and the data changed.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onNewData</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/Entity.html">Entity</a></span><span class="o">&lt;</span><span class="kt">Any</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP13onNotModifiedyAaB_pyycF"></a>
                    <a name="//apple_ref/swift/Method/onNotModified(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP13onNotModifiedyAaB_pyycF">onNotModified(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the closure once if the request succeeds with a 304.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onNotModified</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP9onFailureyAaB_pyAA0B5ErrorVcF"></a>
                    <a name="//apple_ref/swift/Method/onFailure(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP9onFailureyAaB_pyAA0B5ErrorVcF">onFailure(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the closure once if the request fails for any reason.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onFailure</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/RequestError.html">RequestError</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP5startAaB_pyF"></a>
                    <a name="//apple_ref/swift/Method/start()" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP5startAaB_pyF">start()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Immediately start this request if it was deferred. Does nothing if the request is already started.</p>

<p>You rarely need to call this method directly, because most requests are started for you automatically:</p>

<ul>
<li>Any request you receive from <code><a href="../Classes/Resource.html#/s:6Siesta8ResourceC7request_0C8MutationAA7Request_pAA0E6MethodO_y10Foundation10URLRequestVzctF">Resource.request(...)</a></code> or <code><a href="../Classes/Resource.html#/s:6Siesta8ResourceC4loadAA7Request_pyF">Resource.load()</a></code> is already started.</li>
<li>Requests start automatically when you use <code>RequestChainAction.passTo</code> in a chain.</li>
</ul>

<p>When do you need this method, then? It’s rare. There are two situations:</p>

<ul>
<li><code><a href="../Structs/Configuration.html#/s:6Siesta13ConfigurationV16decorateRequests4withyAA7Request_pAA8ResourceC_AaF_ptc_tF">Configuration.decorateRequests(...)</a></code> can defer a request by hanging on to it while returning a different request.
You can use this method to manually start a request that was deferred this way.</li>
<li><code><a href="../Protocols/Request.html#/s:6Siesta7RequestP8repeatedAaB_pyF">Request.repeated()</a></code> does not automatically start the request it returns. This is to allow you to implement
time-delayed retries.</li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">start</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP5stateAA0B5StateOvp"></a>
                    <a name="//apple_ref/swift/Property/state" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP5stateAA0B5StateOvp">state</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Indicates whether this request is waiting to be started, in progress, or completed and has a response already.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    It is <em>always</em> valid to call any of <code>Request</code>’s methods, including hooks (<code><a href="../Protocols/Request.html#/s:6Siesta7RequestP12onCompletionyAaB_pyAA12ResponseInfoVcF">onCompletion(...)</a></code> and friends),
no matter what state the request is in. You do not need to defensively check this property before working with
a request; in fact, if you find yourself wanting it at all, you are probably doing something awkward and
unnecessarily complicated.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt"><a href="../Enums/RequestState.html">RequestState</a></span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP8progressSdvp"></a>
                    <a name="//apple_ref/swift/Property/progress" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP8progressSdvp">progress</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>An estimate of the progress of the request, taking into account request transfer, response transfer, and latency.
Result is either in [0&hellip;1], or is NAN if insufficient information is available.</p>

<p>The property will always be 1 if a request is completed. Note that the converse is not true: a value of 1 does
not necessarily mean the request is completed; it means only that we estimate the request <em>should</em> be completed
by now. Use the <code>isCompleted</code> property to test for actual completion.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">var</span> <span class="nv">progress</span><span class="p">:</span> <span class="kt">Double</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP10onProgressyAaB_pySdcF"></a>
                    <a name="//apple_ref/swift/Method/onProgress(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP10onProgressyAaB_pySdcF">onProgress(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call the given closure with progress updates at regular intervals while the request is in progress.
Will <em>always</em> receive a call with a value of 1 when the request completes.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@discardableResult</span>
<span class="kd">func</span> <span class="nf">onProgress</span><span class="p">(</span><span class="n">_</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP6cancelyyF"></a>
                    <a name="//apple_ref/swift/Method/cancel()" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP6cancelyyF">cancel()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Cancel the request if it is still in progress. Has no effect if a response has already been received.</p>

<p>If this method is called while the request is in progress, it immediately triggers the <code>failure</code>/<code>completion</code>
callbacks, with the error’s <code>cause</code> set to <code><a href="../Structs/RequestError/Cause/RequestCancelled.html">RequestError.Cause.RequestCancelled</a></code>.</p>

<p>Note that <code>cancel()</code> is not guaranteed to stop the request from reaching the server. In fact, it is not guaranteed
to have any effect at all on the underlying request, subject to the whims of the <code><a href="../Protocols/NetworkingProvider.html">NetworkingProvider</a></code>. Therefore,
after calling this method on a mutating request (POST, PUT, etc.), you should consider the service-side state of
the resource to be unknown. Is it safest to immediately call either <code><a href="../Classes/Resource.html#/s:6Siesta8ResourceC4loadAA7Request_pyF">Resource.load()</a></code> or <code><a href="../Classes/Resource.html#/c:@M@Siesta@objc(cs)BOSResource(im)wipe">Resource.wipe()</a></code>.</p>

<p>This method <em>does</em> guarantee, however, that after it is called, even if a network response does arrive it will be
ignored and not trigger any callbacks.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">cancel</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestP8repeatedAaB_pyF"></a>
                    <a name="//apple_ref/swift/Method/repeated()" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestP8repeatedAaB_pyF">repeated()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Send the same request again, returning a new <code>Request</code> instance for the new attempt. You can combine this with
<code><a href="../Protocols/Request.html#/s:6Siesta7RequestPAAE7chained13whenCompletedAaB_pAA0B11ChainActionOAA12ResponseInfoVc_tF">Request.chained(...)</a></code> to retry failed requests with updated headers.</p>

<p>The returned request is <strong>not</strong> already started. You must call <code><a href="../Protocols/Request.html#/s:6Siesta7RequestP5startAaB_pyF">start()</a></code> when you are ready for it to begin.</p>
<div class="aside aside-warning">
    <p class="aside-title">Warning</p>
    Use with caution! Repeating a failed request for any HTTP method other than GET is potentially unsafe,
because you do not always know whether the server processed your request before the error occurred. <strong>Ensure
that it is safe to repeat a request before calling this method.</strong>

</div>

<p>This method picks up certain contextual changes:</p>

<ul>
<li>It <strong>will</strong> honor any changes to <code><a href="../Structs/Configuration.html#/s:6Siesta13ConfigurationV7headersSDyS2SGvp">Configuration.headers</a></code> made since the original request.</li>
<li>It <strong>will</strong> rerun the <code>requestMutation</code> closure you passed to <code><a href="../Classes/Resource.html#/s:6Siesta8ResourceC7request_0C8MutationAA7Request_pAA0E6MethodO_y10Foundation10URLRequestVzctF">Resource.request(...)</a></code> (if you passed one).</li>
<li>It <strong>will not</strong> redecorate the request, and <strong>will not</strong> pick up any changes to
<code><a href="../Structs/Configuration.html#/s:6Siesta13ConfigurationV16decorateRequests4withyAA7Request_pAA8ResourceC_AaF_ptc_tF">Configuration.decorateRequests(...)</a></code> since the original call. This is so that a request wrapper can safely
retry its nested request without triggering a brain-bending hall of mirrors effect.</li>
</ul>

<p>Note that this means the new request may not be indentical to the original one.</p>
<div class="aside aside-warning">
    <p class="aside-title">Warning</p>
    <p>Because <code>repeated()</code> will pick up header changes from configuration, it is possible for a request to run
again with different auth credentials. This is intentional: one of the primary use cases for this dangerous
method is automatically retrying a request with an updated auth token. However, the onus is on you to ensure
that you do not hold on to and repeat a request after a user logs out. Put those safety goggles on.</p>

</div><div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>The new <code>Request</code> does <strong>not</strong> attach all the callbacks (e.g. <code><a href="../Protocols/Request.html#/s:6Siesta7RequestP12onCompletionyAaB_pyAA12ResponseInfoVcF">onCompletion(_:)</a></code>) from the old one.
Doing so would violate the API contract of <code>Request</code> that any callback will be called at most once.</p>

<p>After calling <code>repeated()</code>, you will need to attach new callbacks to the new request. Otherwise nobody will
hear about the response when it arrives. (Q: If a request completes and nobody’s around to hear it, does it
make a response? A: Yes, because it still uses bandwidth, and potentially changes state on the server.)</p>

<p>By the same principle, repeating a <code>load()</code> request will trigger a second network call, but will not cause the
resource’s state to be updated again with the result.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">repeated</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Siesta7RequestPAAE7chained13whenCompletedAaB_pAA0B11ChainActionOAA12ResponseInfoVc_tF"></a>
                    <a name="//apple_ref/swift/Method/chained(whenCompleted:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Siesta7RequestPAAE7chained13whenCompletedAaB_pAA0B11ChainActionOAA12ResponseInfoVc_tF">chained(whenCompleted:<wbr>)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Gathers multiple requests into a <strong>request chain</strong>, a wrapper that appears from the outside to be a single
request. You can use this to add behavior to a request in a way that is transparent to outside observers. For
example, you can transparently renew expired tokens.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    This returns a new <code>Request</code>, and does not alter the original one (thus <code>chained</code> and not <code>chain</code>). Any
hooks attached to the original request will still see that request complete, and will not see any of the
chaining behavior.

</div>

<p>In this pseudocode:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">chainedRequest</span> <span class="o">=</span> <span class="n">underlyingRequest</span><span class="o">.</span><span class="n">chained</span> <span class="p">{</span>
  <span class="n">response</span> <span class="k">in</span> <span class="err">…</span><span class="n">whenCompleted</span><span class="err">…</span>
<span class="p">}</span>
</code></pre>

<p>…the following things happen, in this order:</p>

<ul>
<li>The chain waits for <code>underlyingRequest</code> to complete.</li>
<li>The response (no matter whether success or failure) gets passed to <code>whenCompleted</code>.</li>
<li>The <code>whenCompleted</code> closure examines that <code>response</code>, and returns a <code><a href="../Enums/RequestChainAction.html">RequestChainAction</a></code>.

<ul>
<li>If it returns <code>.useResponse</code> or <code>.useThisResponse</code>, the chain is now done, and any hooks attached to
<code>chainedRequest</code> see that response.</li>
<li>If it returns <code>.passTo(newRequest)</code>, then the chain will wait for <code>newRequest</code> (which may itself be a chain),
and yield whatever repsonse it produces.</li>
</ul></li>
</ul>

<p>Calling <code><a href="../Protocols/Request.html#/s:6Siesta7RequestP6cancelyyF">cancel()</a></code> on <code>chainedRequest</code> cancels the currently executing request and immediately stops the chain,
never executing your <code>whenCompleted</code> closure. (Note, however, that calling <code><a href="../Protocols/Request.html#/s:6Siesta7RequestP6cancelyyF">cancel()</a></code> on <code>underlyingRequest</code>
does <em>not</em> stop the chain; instead, the cancellation error is passed to your <code>whenCompleted</code> just like any other error.)</p>
<div class="aside aside-warning">
    <p class="aside-title">Warning</p>
    <p>This cancellation behavior means that your <code>whenCompleted</code> closure may never execute.
If you want guaranteed execution of cleanup code, attach a handler to the chained request:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="kt">ThingThatNeedsCleanup</span><span class="p">()</span>
<span class="n">request</span>
  <span class="o">.</span><span class="n">chained</span> <span class="p">{</span> <span class="err">…</span><span class="kd">some</span> <span class="n">logic</span><span class="err">…</span> <span class="p">}</span>           <span class="c1">// May not be called if chain is cancelled</span>
  <span class="o">.</span><span class="n">onCompletion</span><span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="n">foo</span><span class="o">.</span><span class="nf">cleanUp</span><span class="p">()</span> <span class="p">}</span> <span class="c1">// Guaranteed to be called exactly once</span>
</code></pre>

</div>

<p>Chained requests currently do not support progress. If you are reading these words and want that feature, please
file an issue on Github!</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <code><a href="../Structs/Configuration.html#/s:6Siesta13ConfigurationV16decorateRequests4withyAA7Request_pAA8ResourceC_AaF_ptc_tF">Configuration.decorateRequests(...)</a></code>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">chained</span><span class="p">(</span><span class="n">whenCompleted</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/ResponseInfo.html">ResponseInfo</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Enums/RequestChainAction.html">RequestChainAction</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Request</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>© 2020 <a class="link" href="http://bustoutsolutions.com" target="_blank" rel="noopener" rel="external">Bust Out Solutions</a> under <a class="link" href="https://github.com/bustoutsolutions/siesta/blob/master/LICENSE" target="_blank" rel="noopener" rel="external">open source license</a>.</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="noopener" rel="external">jazzy ♪♫ vX.X.X</a>, a <a class="link" href="https://realm.io" target="_blank" rel="noopener" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
